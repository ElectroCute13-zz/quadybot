import time

import motion
from mainloop import *
from servo_calib import servo_cal

# import Adafruit_PCA9685
# import gpio as GPIO

# GPIO.setmode(GPIO.BCM)
# pwm = Adafruit_PCA9685.PCA9685()
# pwm.set_pwm_freq(50)
l = motion.leg(75, 100)

s1 = servo_cal(1, 550, 175)
s2 = servo_cal(2, 510, 175)
s3 = servo_cal(3, 180, 520)
s4 = servo_cal(4, 165, 555)
s5 = servo_cal(5, 500, 155)
s6 = servo_cal(6, 160, 540)
s7 = servo_cal(7, 170, 525)
s8 = servo_cal(8, 525, 170)


def wolfxy(s, st_x, en_x, step):
    for i in range(s):

        for j in range(st_x, en_x, step):

            #####################################
            ##########     leg1       ###########
            #####################################
            if j in range(31):
                mainloop(j, 0, 30, -40, -20, s1, s2, 0, 1)
                print('loop1')
                #####################################
                ##########     leg2       ###########
                #####################################
                mainloop(j, 0, 30, 5, 40, s3, s4, 2, 3)
                print('loop2')
                #####################################
                ##########     leg3       ###########
                #####################################

                mainloop(j, 0, 30, 40, -40, s5, s6, 4, 5)
                print('loop3')

                #####################################
                ##########     leg4       ###########
                #####################################

                mainloop(j, 0, 30, -20, 5, s7, s8, 6, 7)
                print('loop4')

            elif j in range(31, 61):
                #####################################
                ##########     leg1       ###########
                #####################################

                mainloop(j, 31, 60, -20, 5, s1, s2, 0, 1)
                print('loop11')
                #####################################
                ##########     leg2       ###########
                #####################################

                mainloop(j, 31, 61, 40, -40, s3, s4, 2, 3)
                print('loop21')
                #####################################
                ##########     leg3       ###########
                #####################################

                mainloop(j, 31, 61, -40, -20, s5, s6, 4, 5)
                print('loop31')

                #####################################
                ##########     leg4       ###########
                #####################################

                mainloop(j, 31, 61, 5, 40, s7, s8, 6, 7)
                print('loop41')

            elif j in range(61, 91):
                #####################################
                ##########     leg1       ###########
                #####################################

                mainloop(j, 61, 91, 5, 40, s1, s2, 0, 1)
                print('loop51')
                #####################################
                ##########     leg2       ###########
                #####################################

                mainloop(j, 61, 91, -40, -20, s3, s4, 2, 3)
                print('loop61')
                #####################################
                ##########     leg3       ###########
                #####################################

                mainloop(j, 61, 91, -20, 5, s5, s6, 4, 5)
                print('loop71')

                #####################################
                ##########     leg4       ###########
                #####################################

                mainloop(j, 61, 91, 40, -40, s7, s8, 6, 7)
                print('loop81')
            elif j in range(91, 121):
                #####################################
                ##########     leg1       ###########
                #####################################

                mainloop(j, 91, 121, 40, -40, s1, s2, 0, 1)
                print('loop91')
                #####################################
                ##########     leg2       ###########
                #####################################

                mainloop(j, 91, 121, -20, 5, s3, s4, 2, 3)
                print('loop101')
                #####################################
                ##########     leg3       ###########
                #####################################

                mainloop(j, 91, 121, 5, 40, s5, s6, 4, 5)
                print('loop111')
                #####################################
                ##########     leg4       ###########
                #####################################

                mainloop(j, 91, 121, -40, -20, s7, s8, 6, 7)
                print('loop121')
            else:
                print("nothing works")
                break


if __name__ == "__main__":
    while (True):
        wolfxy(2, 0, 121, 1)
        time.sleep(1)
        wolfxy(2, 120, 0, -1)
        time.sleep(1)
